<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Special Effects Packages - BundleBooth</title><style>:root{--bb-blue:#333;--bb-red:#e74c3c;--bb-light:#f4f4f4;--bb-dark:#343a40;--bb-green:#2ecc71;--bb-secondary:#666;--bb-hover-grey:#4a5057}*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}body{font-family:Poppins,sans-serif;line-height:1.6;color:#333;background-color:#fff;padding-bottom:40px}.container{max-width:1200px;margin:0 auto;padding:20px}h2,h3{font-weight:600;color:var(--bb-blue)}h2{font-size:1.8rem;margin-bottom:20px}h3{font-size:1.3rem;margin-bottom:15px}.booth-options{display:flex;justify-content:center;gap:15px;margin-bottom:20px}.booth-option{cursor:pointer;padding:8px 16px;border-radius:6px;font-size:.9rem;font-weight:500;transition:box-shadow .3s ease,transform .3s ease}.booth-option[data-service=sparkler-boxes]{background:#fff4e6;color:#b8860b}.booth-option[data-service=sparkler-boxes].active{box-shadow:0 0 8px rgba(184,134,11,.6);transform:scale(1.05)}.booth-option[data-service=dry-ice-fog]{background:#e6f0fa;color:#4682b4}.booth-option[data-service=dry-ice-fog].active{box-shadow:0 0 8px rgba(70,130,180,.6);transform:scale(1.05)}.booth-option[data-service=laser-effect-for-first-dance]{background:#f5e6ff;color:#6a1b9a}.booth-option[data-service=laser-effect-for-first-dance].active{box-shadow:0 0 8px rgba(106,27,154,.6);transform:scale(1.05)}.booth-grid{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;gap:30px;padding:0 60px;position:relative;margin-bottom:30px;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none;user-select:none;touch-action:pan-x}.booth-grid::-webkit-scrollbar{display:none}.booth-container{flex:0 0 calc(50% - 15px);min-width:calc(50% - 15px);background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.05);transition:transform .3s ease,box-shadow .3s ease;border:1px solid #e0e0e0;scroll-snap-align:start;position:relative}.booth-container::after{content:'';position:absolute;top:0;right:0;width:120px;height:100%;background:linear-gradient(to left,rgba(255,255,255,.9),transparent);pointer-events:none;opacity:1;transition:opacity .3s ease}.booth-container.no-fade::after{opacity:0}.booth-container:hover{transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,.1)}.image-container{display:flex;justify-content:center;align-items:center;height:300px;padding:20px 0;background:linear-gradient(135deg,#FFF 0%,#F5F6F5 100%)}.booth-image{width:250px;height:250px;object-fit:cover;border-radius:50%;border:5px solid #fff;box-shadow:0 3px 10px rgba(192,192,192,.3)}.booth-content{padding:25px;padding-top:15px}.booth-description{margin-bottom:20px;color:#555;font-size:.95rem}.slideshow-container{position:relative;font-family:Poppins,sans-serif;margin-top:20px}.slideshow-header{font-size:1.1rem;font-weight:500;color:var(--bb-blue);margin-bottom:10px}.slide{position:relative;background:#fff;border:1px solid #ddd;border-radius:12px;padding:18px;box-shadow:0 4px 8px rgba(0,0,0,.06);opacity:0;transform:translateY(20px);animation:fadeInUp .6s forwards;cursor:pointer;transition:transform .2s,box-shadow .2s;display:none}.slide.active{display:block}.slide:active{transform:scale(.98)}@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}.slide h3{margin:0;color:var(--bb-blue);font-size:1.1rem;line-height:1.3;display:inline-block;vertical-align:middle;padding-right:30px}.sale-tag,.new-tag{font-size:.6rem;color:var(--bb-red);vertical-align:super;font-weight:600;margin-left:4px;text-transform:uppercase}.slide p.description{margin:0;font-size:.9rem;color:#555}.slide p{margin:0;font-size:.9rem}.price{font-size:1rem}.price.sale{color:var(--bb-green);font-weight:600}.price.no-sale{color:var(--bb-dark);font-weight:400}.original-price{text-decoration:line-through;color:var(--bb-secondary);font-size:.9rem;margin-left:5px}.discount{color:var(--bb-red);font-weight:600;font-size:.9rem;margin-left:5px}.book-now-button{display:inline-block;margin-top:12px;padding:10px 16px;background:rgba(44,62,80,.1);color:var(--bb-blue);font-weight:400;border-radius:6px;text-decoration:none;font-size:14px;border:none;cursor:pointer;width:100%;text-align:center;transition:all .25s}.book-now-button:hover,.book-now-button:focus{background:var(--bb-hover-grey);color:#fff;transform:translateY(-2px);outline:0}.book-now-button:active{background:var(--bb-dark);color:#fff;transform:translateY(0)}.browse-more-button{display:inline-block;margin-top:12px;padding:10px 20px;background:rgba(44,62,80,.1);color:var(--bb-blue);font-weight:500;border-radius:6px;text-decoration:none;font-size:14px;transition:all .25s;border:none;cursor:pointer}.browse-more-button:hover{background:var(--bb-hover-grey);color:#fff;transform:translateY(-2px)}.browse-more-button:active{background:var(--bb-dark);color:#fff;transform:translateY(0)}.book-now-wrapper{text-align:center;margin-top:12px}.slideshow-controls{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:15px}.slideshow-button{background:#fff;border:1px solid #e0e0e0;border-radius:50%;width:36px;height:36px;cursor:pointer;transition:all .25s;display:flex;align-items:center;justify-content:center}.slideshow-button:hover{background:#f5f5f5;transform:scale(1.1)}.slideshow-button:disabled{opacity:.5;cursor:not-allowed;transform:none}.slide-indicator{font-size:14px;color:#333;min-width:60px;text-align:center}.package-type-tag{display:inline-block;background:#e8f4fc;color:var(--bb-blue);padding:3px 8px;border-radius:4px;margin-right:5px;font-size:.8em;font-weight:500}.bundled-tag{background:#e8fce8;color:#2e7d32;padding:3px 8px;border-radius:4px;margin-right:5px;font-size:.8em;font-weight:500}.equipment-tags{display:flex;flex-wrap:wrap;gap:6px;margin:0}.package-note{font-size:.85rem;color:#666;margin:0;font-style:normal}.equipment-tag-photo-booth{background:#e6f0fa;color:#1e3a8a;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-360-video-booth{background:#e9f7e9;color:#1a4d1a;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-waffle-booth{background:#fcf4e8;color:#7c2d12;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-magazine-photo-booth-box{background:#f3e8ff;color:#4c1d95;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-espresso-coffee-booth{background:#e6d9cb;color:#5c4033;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-audio-guest-book{background:#fce7f3;color:#831843;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-smoothies-booth{background:#fce7f3;color:#831843;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-sparkler-boxes{background:#fff7e0;color:#5a4a00;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-dry-ice-fog{background:#e0f7fa;color:#164e63;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.equipment-tag-laser-first-dance{background:#e8ecef;color:#495057;padding:3px 8px;border-radius:4px;margin:3px;font-size:14px;font-weight:400}.loading{text-align:center;padding:20px;color:#95a5a6;font-style:italic}.error-message{color:#e74c3c;text-align:center;padding:20px;font-weight:500}.share-button{position:absolute;top:10px;right:10px;background:transparent;border:none;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;transition:all .25s}.share-button:hover{background:#4a5057;border-radius:6px}.share-button:active{background:#343a40}.share-button svg{width:20px;height:20px;fill:#333}.share-button:hover svg{fill:#fff}.share-button:active svg{fill:#fff}.share-button .tooltip{visibility:hidden;background:#343a40;color:#fff;text-align:center;border-radius:6px;padding:5px 8px;position:absolute;z-index:1;top:100%;right:50%;transform:translateX(50%);font-size:12px;opacity:0;transition:opacity .2s;white-space:nowrap}.share-button:hover .tooltip{visibility:visible;opacity:1}.slideshow-note{font-family:Poppins,sans-serif;font-size:.8rem;color:#95a5a6;text-align:center;margin:10px 0}@media (max-width:900px){.booth-options{display:none}.booth-grid{display:grid;grid-template-columns:1fr;grid-template-rows:auto;gap:30px;padding:0;overflow-x:hidden;scroll-snap-type:none;touch-action:auto}.booth-container{min-width:100%;max-width:100%}.booth-container::after{display:none}.slide{padding:16px}.slide h3{font-size:1rem;color:#343a40}.package-type-tag,.bundled-tag{color:#343a40}.share-button{padding:6px}.share-button svg{width:18px;height:18px}.share-button .tooltip{font-size:10px;padding:3px 5px}}@media (max-width:600px){.booth-content{padding:16px}h2{font-size:1.5rem}.booth-description{font-size:.9rem}.slide h3{font-size:1rem}.equipment-tag-photo-booth,.equipment-tag-360-video-booth,.equipment-tag-waffle-booth,.equipment-tag-magazine-photo-booth-box,.equipment-tag-espresso-coffee-booth,.equipment-tag-audio-guest-book,.equipment-tag-smoothies-booth,.equipment-tag-sparkler-boxes,.equipment-tag-dry-ice-fog,.equipment-tag-laser-first-dance,.package-type-tag,.bundled-tag{font-size:11px;padding:3px 8px}.sale-tag,.new-tag{font-size:.5rem}}</style><link href=https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css><script src=https://html2canvas.hertzen.com/dist/html2canvas.min.js></script><script type=text/javascript>(function(C,A,L){let p=function(a,ar){a.q.push(ar)};let d=C.document;C.Cal=C.Cal||function(){let cal=C.Cal;let ar=arguments;if(!cal.loaded){cal.ns={};cal.q=cal.q||[];d.head.appendChild(d.createElement("script")).src=A;cal.loaded=true}if(ar[0]===L){const api=function(){p(api,arguments)};const namespace=ar[1];api.q=api.q||[];if(typeof namespace==="string"){cal.ns[namespace]=cal.ns[namespace]||api;p(cal.ns[namespace],ar);p(cal,["initNamespace",namespace])}else p(cal,ar);return}p(cal,ar)}})(window,"https://app.cal.com/embed/embed.js","init");</script></head><body><div class=container><div class=booth-options><div class="booth-option active" data-booth=0 data-service=sparkler-boxes>Sparklers Box</div><div class=booth-option data-booth=1 data-service=dry-ice-fog>Dry Ice Fog</div><div class=booth-option data-booth=2 data-service=laser-effect-for-first-dance>Laser First Dance</div></div><div class=booth-grid><div class=booth-container><div class=image-container><img src=https://img1.wsimg.com/isteam/ip/e5031132-8c20-44e3-a810-901cf200c927/rs%3Dw_1280%2Ch_1921.webp alt="Sparklers Box" class=booth-image></div><div class=booth-content><h2>✨ Sparklers Box</h2><p class=booth-description>Light up your celebration with our elegant Sparklers Box! A stylish station offering guests premium sparklers for that magical photo moment or grand finale. Beautifully displayed and easy to use, it's the perfect touch for weddings, parties, and special events.</p><div class=slideshow-header>Available Packages:</div><div class=slideshow-container id=sparklers-box-slideshow><div class=loading>Loading Sparklers Box packages...</div></div><div class=slideshow-note>Go to Packages or tap 'Browse More' to view more options.</div><div class=slideshow-controls><button class=slideshow-button id=sparklers-box-prev aria-label="Previous Slide" disabled><i class="fas fa-chevron-left"></i></button><span class=slide-indicator id=sparklers-box-indicator>0 of 0</span><button class=slideshow-button id=sparklers-box-next aria-label="Next Slide" disabled><i class="fas fa-chevron-right"></i></button></div><div class=book-now-wrapper><a href=https://bundlebooth.ca/packages target=_blank class=browse-more-button>Browse More</a></div></div></div><div class=booth-container><div class=image-container><img src=https://img1.wsimg.com/isteam/ip/e5031132-8c20-44e3-a810-901cf200c927/rs%253Dw_1280%252Ch_1784.webp alt="Dry Ice Fog" class=booth-image></div><div class=booth-content><h2>🌫️ Dry Ice (Fog Effect)</h2><p class=booth-description>Create a stunning, cinematic atmosphere with our Dry Ice Fog Effect! This low-lying fog adds a magical touch to first dances, stage entrances, or any moment you want to make unforgettable. Safe, odorless, and mesmerizing—perfect for weddings, parties, and live events.</p><div class=slideshow-header>Available Packages:</div><div class=slideshow-container id=dry-ice-fog-slideshow><div class=loading>Loading Dry Ice Fog packages...</div></div><div class=slideshow-note>Go to Packages or tap 'Browse More' to view more options.</div><div class=slideshow-controls><button class=slideshow-button id=dry-ice-fog-prev aria-label="Previous Slide" disabled><i class="fas fa-chevron-left"></i></button><span class=slide-indicator id=dry-ice-fog-indicator>0 of 0</span><button class=slideshow-button id=dry-ice-fog-next aria-label="Next Slide" disabled><i class="fas fa-chevron-right"></i></button></div><div class=book-now-wrapper><a href=https://bundlebooth.ca/packages target=_blank class=browse-more-button>Browse More</a></div></div></div><div class=booth-container><div class=image-container><img src=https://img1.wsimg.com/isteam/ip/e5031132-8c20-44e3-a810-901cf200c927/rs%3Dw_1920%2Cm.png alt="Laser First Dance" class=booth-image></div><div class=booth-content><h2>🪩 Laser First Dance</h2><p class=booth-description>Make your first dance truly unforgettable with our Laser First Dance Experience! Set beneath a canopy of synchronized laser lights and dreamy effects, your special moment becomes a breathtaking visual masterpiece. Perfect for couples who want something unique, modern, and magical.</p><div class=slideshow-header>Available Packages:</div><div class=slideshow-container id=laser-dance-slideshow><div class=loading>Loading Laser First Dance packages...</div></div><div class=slideshow-note>Go to Packages or tap 'Browse More' to view more options.</div><div class=slideshow-controls><button class=slideshow-button id=laser-dance-prev aria-label="Previous Slide" disabled><i class="fas fa-chevron-left"></i></button><span class=slide-indicator id=laser-dance-indicator>0 of 0</span><button class=slideshow-button id=laser-dance-next aria-label="Next Slide" disabled><i class="fas fa-chevron-right"></i></button></div><div class=book-now-wrapper><a href=https://bundlebooth.ca/packages target=_blank class=browse-more-button>Browse More</a></div></div></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){const equipmentClassMap={"Photo Booth":"equipment-tag-photo-booth","360 Video Booth":"equipment-tag-360-video-booth","Audio Guest Book":"equipment-tag-audio-guest-book","Magazine Booth Box":"equipment-tag-magazine-photo-booth-box","Espresso & Coffee Booth":"equipment-tag-espresso-coffee-booth","Waffle Booth":"equipment-tag-waffle-booth","Smoothies Booth":"equipment-tag-smoothies-booth","Sparkler Boxes":"equipment-tag-sparkler-boxes","Dry Ice Fog":"equipment-tag-dry-ice-fog","Laser First Dance":"equipment-tag-laser-first-dance"};const dataSource="https://raw.githubusercontent.com/bundlebooth/bdb-1.0/main/packages.json";const fallbackPackages=[{name:"Sample Sparkler Boxes Package",equipment:["Sparkler Boxes"],packageType:"Individual",price:200,description:"A sample sparkler boxes package for display purposes.",guests:50,maxDuration:2,slug:"sparkler-boxes",Sale:"N",New:"Y",note:""},{name:"Sample Dry Ice Fog Package",equipment:["Dry Ice Fog"],packageType:"Individual",price:300,regPrice:400,description:"A sample dry ice fog package for display purposes.",guests:75,maxDuration:3,slug:"dry-ice-fog",Sale:"Y",New:"N",note:""},{name:"Sample Laser First Dance Package",equipment:["Laser First Dance"],packageType:"Individual",price:500,description:"A sample laser first dance package for display purposes.",guests:100,maxDuration:2,slug:"laser-first-dance",Sale:"N",New:"Y",note:""}];fallbackPackages.forEach(pkg=>{const slug=pkg.slug||`fallback-${pkg.name.toLowerCase().replace(/\s+/g,"-")}`;const namespace=slug;Cal("init",namespace,{origin:"https://app.cal.com"});Cal.ns[namespace]("ui",{"hideEventTypeDetails":false,"layout":"month_view"})});const boothGrid=document.querySelector(".booth-grid");const boothOptions=document.querySelectorAll(".booth-option");const boothContainers=document.querySelectorAll(".booth-container");let isDragging=false,startX,scrollLeft,velocity=0,lastTime=0,lastX;function startDrag(e){if(window.innerWidth<=900)return;isDragging=true;boothGrid.style.cursor="grabbing";startX=(e.type==="touchstart"?e.touches[0].pageX:e.pageX)-boothGrid.offsetLeft;scrollLeft=boothGrid.scrollLeft;velocity=0;lastTime=Date.now();lastX=startX;cancelMomentum()}function drag(e){if(!isDragging||window.innerWidth<=900)return;e.preventDefault();const x=(e.type==="touchmove"?e.touches[0].pageX:e.pageX)-boothGrid.offsetLeft;const walk=(x-startX)*1.5;boothGrid.scrollLeft=scrollLeft-walk;const now=Date.now();const deltaTime=now-lastTime;if(deltaTime>0){velocity=(x-lastX)/deltaTime;lastX=x;lastTime=now}}function endDrag(){if(!isDragging)return;isDragging=false;boothGrid.style.cursor="grab";applyMomentum();updateActiveOption()}let momentumId;function applyMomentum(){if(Math.abs(velocity)<.1)return;let currentScroll=boothGrid.scrollLeft;const momentum=velocity*1000;function animate(){currentScroll-=velocity*16;boothGrid.scrollLeft=currentScroll;velocity*=.95;if(Math.abs(velocity)>.01){momentumId=requestAnimationFrame(animate)}else{snapToNearest()}}momentumId=requestAnimationFrame(animate)}function cancelMomentum(){if(momentumId){cancelAnimationFrame(momentumId);momentumId=null}}function snapToNearest(){const scrollLeft=boothGrid.scrollLeft;const containerWidth=boothContainers[0].offsetWidth+30;const index=Math.round(scrollLeft/containerWidth);boothGrid.scrollTo({left:index*containerWidth,behavior:"smooth"});updateActiveOption()}function updateFadeEffect(){if(window.innerWidth>900){const gridRect=boothGrid.getBoundingClientRect();boothContainers.forEach((container,index)=>{const rect=container.getBoundingClientRect();const isFullyVisible=rect.left>=gridRect.left&&rect.right<=gridRect.right;container.classList.toggle("no-fade",isFullyVisible);if(index===boothContainers.length-1&&isFullyVisible){container.classList.add("no-fade")}})}}function updateActiveOption(){if(window.innerWidth<=900)return;const scrollLeft=boothGrid.scrollLeft;const containerWidth=boothContainers[0].offsetWidth+30;const index=Math.round(scrollLeft/containerWidth);boothOptions.forEach(option=>option.classList.remove("active"));if(boothOptions[index]){boothOptions[index].classList.add("active")}}function scrollToBooth(index){if(window.innerWidth<=900)return;const booth=boothContainers[index];boothGrid.scrollTo({left:booth.offsetLeft-30,behavior:"smooth"});boothOptions.forEach(option=>option.classList.remove("active"));boothOptions[index].classList.add("active")}function setupTouchEvents(){if(window.innerWidth>900){boothGrid.addEventListener("mousedown",startDrag);boothGrid.addEventListener("mousemove",drag);boothGrid.addEventListener("mouseup",endDrag);boothGrid.addEventListener("mouseleave",endDrag);boothGrid.addEventListener("touchstart",startDrag,{passive:false});boothGrid.addEventListener("touchmove",drag,{passive:false});boothGrid.addEventListener("touchend",endDrag)}}function removeTouchEvents(){boothGrid.removeEventListener("mousedown",startDrag);boothGrid.removeEventListener("mousemove",drag);boothGrid.removeEventListener("mouseup",endDrag);boothGrid.removeEventListener("mouseleave",endDrag);boothGrid.removeEventListener("touchstart",startDrag);boothGrid.removeEventListener("touchmove",drag);boothGrid.removeEventListener("touchend",endDrag)}boothOptions.forEach((option,index)=>{option.addEventListener("click",()=>{scrollToBooth(index)})});boothGrid.addEventListener("scroll",()=>{updateFadeEffect();updateActiveOption()});setupTouchEvents();window.addEventListener("resize",()=>{removeTouchEvents();setupTouchEvents();updateFadeEffect()});if(window.innerWidth>900){boothGrid.style.cursor="grab";boothOptions[0].classList.add("active");updateFadeEffect()}fetch(dataSource).then(response=>{if(!response.ok){throw new Error(`HTTP error! Status: ${response.status} ${response.statusText}`)}return response.json()}).then(allPackages=>{console.log("Fetched packages:",allPackages);if(!Array.isArray(allPackages)){throw new Error("Invalid data format: Expected an array of packages")}allPackages.forEach(pkg=>{const slug=pkg.slug||`fallback-${pkg.name.toLowerCase().replace(/\s+/g,"-")}`;const namespace=slug;Cal("init",namespace,{origin:"https://app.cal.com"});Cal.ns[namespace]("ui",{"hideEventTypeDetails":false,"layout":"month_view"})});initSlideshows(allPackages)}).catch(error=>{console.error("Error loading packages:",error.message);document.querySelectorAll(".slideshow-container").forEach(container=>{container.innerHTML=`<div class=error-message>Failed to load packages: ${error.message}. Using fallback data.</div>`});initSlideshows(fallbackPackages)});function initSlideshows(packages){const slideshowConfigs=[{containerId:"sparklers-box-slideshow",prevId:"sparklers-box-prev",nextId:"sparklers-box-next",indicatorId:"sparklers-box-indicator",filter:"Sparkler Boxes"},{containerId:"dry-ice-fog-slideshow",prevId:"dry-ice-fog-prev",nextId:"dry-ice-fog-next",indicatorId:"dry-ice-fog-indicator",filter:"Dry Ice Fog"},{containerId:"laser-dance-slideshow",prevId:"laser-dance-prev",nextId:"laser-dance-next",indicatorId:"laser-dance-indicator",filter:"Laser First Dance"}];slideshowConfigs.forEach(config=>{initSlideshowWithFilter(config.containerId,config.prevId,config.nextId,config.indicatorId,packages,config.filter)})}function initSlideshowWithFilter(containerId,prevId,nextId,indicatorId,allPackages,equipmentFilter){const container=document.getElementById(containerId);const prevButton=document.getElementById(prevId);const nextButton=document.getElementById(nextId);const indicator=document.getElementById(indicatorId);let currentSlide=0;let filteredPackages=[];let slides=[];function filterAndSortPackages(){filteredPackages=allPackages.filter(pkg=>{if(!pkg.equipment||!Array.isArray(pkg.equipment)){console.warn(`Package ${pkg.name} has invalid equipment field:`,pkg.equipment);return false}return pkg.equipment.includes(equipmentFilter)}).map(pkg=>({...pkg,regPrice:pkg.regPrice||pkg.originalPrice||null,equipment:pkg.equipment?[...pkg.equipment].sort((a,b)=>{if(a===equipmentFilter)return-1;if(b===equipmentFilter)return 1;return a.localeCompare(b)}):[]}));filteredPackages.sort((a,b)=>{if(a.packageType==="Individual")return-1;if(b.packageType==="Individual")return 1;return a.price-b.price})}function calculateDiscount(price,regPrice){if(!regPrice||regPrice<=price||isNaN(price)||isNaN(regPrice)){return null}const discount=(regPrice-price)/regPrice*100;return Math.round(discount)}function renderSlides(){if(filteredPackages.length===0){container.innerHTML="<div class=loading>No packages available for this equipment type.</div>";slides=[];prevButton.disabled=true;nextButton.disabled=true;indicator.textContent="0 of 0";return}if(slides.length===0){container.innerHTML="";filteredPackages.forEach((pkg,index)=>{const displayType=pkg.packageType==="Bundle"?"Bundled":pkg.packageType;const tagClass=pkg.packageType==="Bundle"?"bundled-tag":"package-type-tag";const durationText=pkg.maxDuration?`${pkg.maxDuration} ${pkg.maxDuration===1?"hour":"hours"}`:"N/A";const durationPrefix=pkg.packageType==="Individual"?"":"Up to ";const slug=pkg.slug||`fallback-${pkg.name.toLowerCase().replace(/\s+/g,"-")}`;const isSale=pkg.Sale==="Y";const isNew=pkg.New==="Y";const priceClass=isSale?"price sale":"price no-sale";const priceDetails=isSale&&pkg.regPrice?`<span class="${priceClass}">C$${pkg.price}</span><span class=original-price>(Reg. C$${pkg.regPrice})</span> - <span class=discount>${calculateDiscount(pkg.price,pkg.regPrice)}% OFF!</span>`:`<span class="${priceClass}">C$${pkg.price}</span>`;const statusTags=[];if(isSale)statusTags.push("<span class=sale-tag>ON SALE!</span>");if(isNew)statusTags.push("<span class=new-tag>NEW!</span>");const slide=document.createElement("div");slide.className=`slide ${index===currentSlide?"active":""}`;const isMobile=window.innerWidth<=900;const buttonTag=isMobile?"a":"button";const buttonAttributes=isMobile?`href="https://app.cal.com/bundleboothca/${slug}" target="_blank" rel="noopener noreferrer"`: `data-cal-link="bundleboothca/${slug}" data-cal-namespace="${slug}" data-cal-config='{"layout":"month_view"}'`;slide.innerHTML=`<h3>${pkg.name}${statusTags.join("")}</h3><div><span class="${tagClass}">${displayType}</span></div><button class=share-button title="Share Package"><svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/></svg><span class=tooltip>Share</span></button><p class=description>${pkg.description}</p><p><strong>Guests:</strong> ${pkg.guests}</p><p><strong>Duration:</strong> ${durationPrefix}${durationText}</p><p><strong>Price:</strong> ${priceDetails}</p><p><strong>Services Included:</strong></p><div class=equipment-tags>${pkg.equipment.map(item=>`<span class="${equipmentClassMap[item]||'equipment-tag-photo-booth'}">${item}</span>`).join("")}</div><p class=package-note>${pkg.note||""}</p><${buttonTag} class=book-now-button ${buttonAttributes}>Book Now</${buttonTag}>`;container.appendChild(slide);slides.push(slide)})}else{slides.forEach((slide,index)=>{slide.classList.toggle("active",index===currentSlide)})}updateControls();const shareButtons=container.querySelectorAll(".share-button");shareButtons.forEach(button=>{button.addEventListener("click",(e)=>{e.stopPropagation();const slide=button.closest(".slide");if(!slide)return;const pkg=filteredPackages[currentSlide];handleShareClick(pkg,e,slide)})})}function updateControls(){prevButton.disabled=currentSlide===0||filteredPackages.length<=1;nextButton.disabled=currentSlide===filteredPackages.length-1||filteredPackages.length<=1;indicator.textContent=filteredPackages.length>0?`${currentSlide+1} of ${filteredPackages.length}`:"0 of 0"}prevButton.addEventListener("click",(e)=>{e.preventDefault();if(currentSlide>0){currentSlide--;renderSlides()}});nextButton.addEventListener("click",(e)=>{e.preventDefault();if(currentSlide<filteredPackages.length-1){currentSlide++;renderSlides()}});window.addEventListener("resize",()=>{renderSlides()});filterAndSortPackages();renderSlides()}function handleShareClick(pkg,e,slide){e.preventDefault();slide.style.opacity="1";slide.style.transform="translateY(0)";slide.style.animation="none";html2canvas(slide,{backgroundColor:"#ffffff",scale:3,removeContainer:false,ignoreElements:el=>el.classList.contains("tooltip")}).then(canvas=>{slide.style.opacity="";slide.style.transform="";slide.style.animation="";const blob=new Promise(resolve=>canvas.toBlob(resolve,"image/jpeg",0.95));blob.then(blobData=>{const file=new File([blobData],`${pkg.slug}.jpg`,{type:"image/jpeg"});const shareUrl=`https://cal.com/bundleboothca/${pkg.slug}`;const isSale=pkg.Sale==="Y";const isNew=pkg.New==="Y";const durationText=pkg.maxDuration?`${pkg.maxDuration} ${pkg.maxDuration===1?"hour":"hours"}`:"N/A";const durationPrefix=pkg.packageType==="Individual"?"":"Up to ";const priceDisplay=isSale&&pkg.regPrice?`C$${pkg.price} (reg. C$${pkg.regPrice}) - ${calculateDiscount(pkg.price,pkg.regPrice)}% OFF!`:`C$${pkg.price}`;const shareText=`${pkg.name} ${isSale?"🎉 ON SALE!":""}${isNew?" ✨ NEW!":""}\n${pkg.description}\nGuests: ${pkg.guests}\nDuration: ${durationPrefix}${durationText}\nPrice: ${priceDisplay}\nServices: ${pkg.equipment.join(", ")}\nBook: ${shareUrl}`;if(navigator.share&&navigator.canShare&&navigator.canShare({files:[file]})){navigator.share({title:pkg.name,text:shareText,files:[file]}).catch(err=>fallbackShare(pkg,shareText,file))}else{fallbackShare(pkg,shareText,file)}}).catch(error=>console.error("Error generating blob:",error))}).catch(error=>console.error("Error generating image:",error))}function fallbackShare(pkg,shareText,file=null){const isMobile=window.matchMedia("(max-width:900px)").matches;const shareSubject=`Check out this BundleBooth Package: ${pkg.name}`;if(isMobile){const smsLink=`sms:?body=${encodeURIComponent(shareText+(file?`\nImage: ${URL.createObjectURL(file)}`:" "))}`;window.location.href=smsLink}else{const mailtoLink=`mailto:?subject=${encodeURIComponent(shareSubject)}&body=${encodeURIComponent(shareText+(file?`\nImage: ${URL.createObjectURL(file)}`:" "))}`;window.location.href=mailtoLink}}})</script></body></html>
